---
title: Collect Click and Impression Data from Advertising DSP Campaigns
description: Learn how to capture cookie-based impression and click events from Advertising DSP ads using Audience Manager pixels
feature: Integration with Adobe Audience Manager
exl-id: d827fbb8-b61a-4601-a42a-1ea60e4f36b7
---
# Collect Media Exposure Data from Advertising DSP Campaigns

*Advertisers with Advertising DSP only*

*Advertisers with an Adobe Advertising-Adobe Audience Manager Integration Only*

This document explains how to tag Advertising DSP ads to capture cookie-based impression and click events using Audience Manager pixels, and additional tasks necessary to use the data.

The event pixels don't capture events that occur in cookie-less environments, such as mobile apps and connected TV (CTV).

## Step 1: Set Up a Data Source in Audience Manager {#set-up-data-source}

In Audience Manager, create a [data source](https://experienceleague.adobe.com/docs/audience-manager/user-guide/features/data-sources/datasources-list-and-settings.html) for the DSP impression and click data. Include the data source ID [in each event tag](#implement-dsp-pixels) so that all tracked events are attributed to the data source.

>[!NOTE]
> It's possible to collect all impression and click data for advertising campaigns running on multiple DSPs within a single data source.

## Step 2: Implement Impression and Click Event Pixels on Webpages {#implement-dsp-pixels}

Advertisers can create and implement event tags for their own brands. If necessary, contact your Adobe Audience Manager consultant or your [!DNL Adobe] account manager for support.

>[!NOTE]
>
>If your organization uses [!DNL Analytics] tracking, then you may not need Audience Manager click tracking. Adobe Analytics captures click signals and can send them to Audience Manager through [server-side forwarding](https://experienceleague.adobe.com/docs/analytics/admin/admin-tools/server-side-forwarding/ssf.html).

### Pixel Syntax

Event pixels must include the following parameters.

**Impression-tracking pixels:**

`[Audience Manager customer domain].demdex.net/event?d_event=imp&d_src=[source id]&d_campaign=${TM_CAMPAIGN_ID_NUM}`

with [optional additional parameters](#parameters) prefixed with `&`

**Click-tracking pixels:**

`[Audience Manager customer domain].demdex.net/event?d_event=click&d_src=[source id]&d_rd=[redirect URL]&d_campaign=${TM_CAMPAIGN_ID_NUM}`

with [optional additional parameters](#parameters) prefixed with `&`

Where:

* `[Audience Manager customer domain]` is the domain name that will send impression or click events to [!DNL Adobe].

* `[source id]` is the ID for the [data source](#set-up-data-source) in which you will track DSP impression and click data.

* `[redirect URL]` is the double-encoded redirect URL. If youâ€™re using an online encoding tool, such as www.urlencoder.org, then run the string through the encoder and re-encode the result.

* `${TM_CAMPAIGN_ID_NUM}` is the numeric campaign ID in DSP. If you want to hardcode an individual campaign ID instead of using the DSP macro, then locate the ID in the campaign settings.

* Each [parameter](#key-value-pairs) is prefixed with `&` and is in the format `d_parameter=parameter_id`, where `parameter` is replaced by the key-value pair for the new field. Example: `&d_placement=${TM_PLACEMENT_ID_NUM}`

### Parameters as Key-Value Pairs {#parameters}

**Format:**  `d_parameter=parameter_id`

    where:
    
    * the parameter is prefixed by `&`

    * `parameter` is replaced by the key-value pair for the new field

    Example:  `&d_placement=${TM_PLACEMENT_ID_NUM}`

Both types of pixel can contain additional parameters as *key-value pairs* to collect traits or to provide campaign metadata (such as a placement name or a campaign name) for other reports. A key-value pair consists of two related elements: a *key*, which is a constant that defines the data set, and a *value*, which is a variable that belongs to the set.

In the key-value pair, the value variable can be either a hard-coded ID or a *macro*, which is a small unit of self-contained code that is dynamically replaced with the corresponding values when the ad tag loads for campaign and user tracking. For campaign-related parameters, you can use [DSP macros](/help/dsp/campaign-management/macros.md) instead of Audience Manager macros to send campaign attributes together with the corresponding impression or click data to Audience Manager, using a single pixel across all ads. The DSP macros that you insert into your event pixels must be appropriate values for the key-value pairs you include within the pixels. For example, for the `d_placement` key, you'd use the DSP macro `${TM_PLACEMENT_ID_NUM}` as the value to capture placement IDs generated by the Adobe Advertising macro.

For a list of macros that Audience Manager supports for impression event pixels, see "[Capturing Campaign Impression Data via Pixel Calls](https://experienceleague.adobe.com/docs/audience-manager/user-guide/implementation-integration-guides/media-data-integration/impression-data-pixels.html#supported-key-value-pairs)."

For a list of macros that Audience Manager supports for click event pixels, see "[Capturing Campaign Click Data via Pixel Calls](https://experienceleague.adobe.com/docs/audience-manager/user-guide/implementation-integration-guides/media-data-integration/click-data-pixels.html)."

>[!TIP]
>
>* The best practice is to include the campaign, placement, creative (ad), and site IDs so you can use the campaign attributes to create Audience Manager traits.
>* To create Audience Optimization reports, additional parameters are required.
>* In the key-value pairs, replace the values with the relevant [DSP macros](/help/dsp/campaign-management/macros.md) so you can use a single pixel across all ads in all campaigns. For example, change `d_campaign=[%campaignID%]`to `d_campaign=${TM_CAMPAIGN_ID_NUM}` to capture campaign IDs generated by the Adobe Advertising macro.
>* You can create your own parameters with hardcoded values, if needed. Example: `d_DSP=AdCloud`

Example of an impression event pixel:

`http://acme.demdex.net/event?d_event=imp&d_src=1052880&d_site=${TM_SITE_ID_NUM}&d_creative=${TM_AD_ID_NUM}&d_placement=${TM_FEED_ID_NUM}&d_campaign=${TM_CAMPAIGN_ID_NUM}&d_DSP=AdCloud&d_bust=${TM_RANDOM}`

### Where to Add the Pixels 

#### Impression-Tracking Pixel

Attach an impression event-tracking pixel to all ads in your [!DNL DSP] campaigns. You can do so in any of the following places:

* At the placement level, which applies the pixel by default to all ads in the placement. In the Tracking section of the placement settings, add the pixel in the [[!UICONTROL Event pixels] field](/help/dsp/campaign-management/placements/placement-settings.md). 

* At the ad level, which overrides any placement-level event pixels. In the ad settings, [create an event pixel on the [!UICONTROL Pixel] tab](/help/dsp/campaign-management/ads/ad-edit.md).

* (For ads on a third-party ad server) At the ad level within the ad server.

#### Click-Tracking Pixel

Within the ad server, insert the click event pixel (with the encoded URL appended) wherever you normally insert the ad's click-through URL.

## Step 3: Post-Implementation Tasks

Once the event tags are implemented, data will flow into the Audience Manager data collection servers. Complete the following tasks before you can use the data in reports.

### Create an [!DNL Amazon S3] Bucket and Data Source

Once your data is on the Audience Manager servers, you must create an [!DNL Amazon Simple Storage Service] ([!DNL Amazon S3]) bucket, and then a data source, to which all pixel data will be sent. Contact your Audience Manager consultant or [Customer Care](https://experienceleague.adobe.com/docs/audience-manager/user-guide/help-and-legal/help-legal-contact.html) if you need support. 

### Create Audience Manager Traits and Segments

Your event data will flow into Audience Manager as [unused signals](https://experienceleague.adobe.com/docs/audience-manager/user-guide/reporting/interactive-and-overlap-reports/unused-signals.html). Manually create [rule-based traits](https://experienceleague.adobe.com/docs/audience-manager/user-guide/features/traits/trait-builder/create-onboarded-rule-based-traits.html) from the ingested data, and then create [segments](https://experienceleague.adobe.com/docs/audience-manager/user-guide/features/segments/segments-purpose.html) using those traits, before you can use the data in reports.

Example trait that populates user-level data for users exposed to a specific creative in DSP:

1. Identify the event as `d_event = imp`. 
1. Identify the creative ID within the DSP campaign, and then map it to the trait as `d_creative=[Creative ID]`.
 
![Trait creation screen](/help/dsp/assets/aa-trait.png)

>[!MORELIKETHIS]
>
>* [DSP Macros](/help/dsp/campaign-management/macros.md)
>* [Overview of Sending DSP Media Exposure Data to Adobe Audience Manager](overview.md)
>* [Use Cases](use-cases.md)
